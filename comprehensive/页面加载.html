<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>页面加载 | 前端程序员备忘录</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="https://www.orzzone.com/projects/cdn/favicon.ico">
    <meta name="description" content="《前端程序员备忘录》是前端基础知识和前端面试题的集锦。">
    
    <link rel="preload" href="/memo/assets/css/0.styles.3bcd4494.css" as="style"><link rel="preload" href="/memo/assets/js/app.475facf6.js" as="script"><link rel="preload" href="/memo/assets/js/2.ee3c45b5.js" as="script"><link rel="preload" href="/memo/assets/js/23.e85ea71f.js" as="script"><link rel="prefetch" href="/memo/assets/js/10.2d48feea.js"><link rel="prefetch" href="/memo/assets/js/11.14eb4961.js"><link rel="prefetch" href="/memo/assets/js/12.89451e86.js"><link rel="prefetch" href="/memo/assets/js/13.b7c01214.js"><link rel="prefetch" href="/memo/assets/js/14.b7cebc8a.js"><link rel="prefetch" href="/memo/assets/js/15.53fcf755.js"><link rel="prefetch" href="/memo/assets/js/16.2c00e0a9.js"><link rel="prefetch" href="/memo/assets/js/17.51fff933.js"><link rel="prefetch" href="/memo/assets/js/18.0a3552fc.js"><link rel="prefetch" href="/memo/assets/js/19.96af495d.js"><link rel="prefetch" href="/memo/assets/js/20.11c6a142.js"><link rel="prefetch" href="/memo/assets/js/21.f28e9395.js"><link rel="prefetch" href="/memo/assets/js/22.fadbac1c.js"><link rel="prefetch" href="/memo/assets/js/24.02f0d102.js"><link rel="prefetch" href="/memo/assets/js/25.ab337d3b.js"><link rel="prefetch" href="/memo/assets/js/26.76045d1b.js"><link rel="prefetch" href="/memo/assets/js/27.7f13f711.js"><link rel="prefetch" href="/memo/assets/js/28.91c040c5.js"><link rel="prefetch" href="/memo/assets/js/29.07a9a56b.js"><link rel="prefetch" href="/memo/assets/js/3.11e8a832.js"><link rel="prefetch" href="/memo/assets/js/30.ce455747.js"><link rel="prefetch" href="/memo/assets/js/31.a9392249.js"><link rel="prefetch" href="/memo/assets/js/32.48e78443.js"><link rel="prefetch" href="/memo/assets/js/33.692bab43.js"><link rel="prefetch" href="/memo/assets/js/34.1ca7d87f.js"><link rel="prefetch" href="/memo/assets/js/35.a0554dc4.js"><link rel="prefetch" href="/memo/assets/js/36.3ea99423.js"><link rel="prefetch" href="/memo/assets/js/37.62684a38.js"><link rel="prefetch" href="/memo/assets/js/38.2c2ff6be.js"><link rel="prefetch" href="/memo/assets/js/39.33beed23.js"><link rel="prefetch" href="/memo/assets/js/4.d0e01616.js"><link rel="prefetch" href="/memo/assets/js/40.de4a23e9.js"><link rel="prefetch" href="/memo/assets/js/41.4abc8617.js"><link rel="prefetch" href="/memo/assets/js/42.480ec4e9.js"><link rel="prefetch" href="/memo/assets/js/43.4355956f.js"><link rel="prefetch" href="/memo/assets/js/44.16821d7b.js"><link rel="prefetch" href="/memo/assets/js/45.ccc0ad47.js"><link rel="prefetch" href="/memo/assets/js/46.702d729d.js"><link rel="prefetch" href="/memo/assets/js/47.530ac8e7.js"><link rel="prefetch" href="/memo/assets/js/48.87fde348.js"><link rel="prefetch" href="/memo/assets/js/49.0fc9da04.js"><link rel="prefetch" href="/memo/assets/js/5.525308c6.js"><link rel="prefetch" href="/memo/assets/js/50.76c019a6.js"><link rel="prefetch" href="/memo/assets/js/51.f6756562.js"><link rel="prefetch" href="/memo/assets/js/52.e64348d8.js"><link rel="prefetch" href="/memo/assets/js/53.8d31df4c.js"><link rel="prefetch" href="/memo/assets/js/54.b6162061.js"><link rel="prefetch" href="/memo/assets/js/55.9017efcb.js"><link rel="prefetch" href="/memo/assets/js/56.9e9c1ebb.js"><link rel="prefetch" href="/memo/assets/js/57.82321609.js"><link rel="prefetch" href="/memo/assets/js/58.da440960.js"><link rel="prefetch" href="/memo/assets/js/59.2f34a426.js"><link rel="prefetch" href="/memo/assets/js/6.7885a851.js"><link rel="prefetch" href="/memo/assets/js/7.3f5e44c5.js"><link rel="prefetch" href="/memo/assets/js/8.4c151ed8.js"><link rel="prefetch" href="/memo/assets/js/9.fede72ab.js">
    <link rel="stylesheet" href="/memo/assets/css/0.styles.3bcd4494.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/memo/" class="home-link router-link-active"><img src="https://www.orzzone.com/projects/cdn/favicon.png" alt="前端程序员备忘录" class="logo"> <span class="site-name can-hide">前端程序员备忘录</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/memo/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/memo/SUMMARY.html" class="nav-link">
  总论
</a></div><div class="nav-item"><a href="https://www.orzzone.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/memo/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/memo/SUMMARY.html" class="nav-link">
  总论
</a></div><div class="nav-item"><a href="https://www.orzzone.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/memo/SUMMARY.html" class="sidebar-link">总论</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/SUMMARY.html#仓库地址" class="sidebar-link">仓库地址</a></li><li class="sidebar-sub-header"><a href="/memo/SUMMARY.html#面试准备" class="sidebar-link">面试准备</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>综合</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/memo/comprehensive/函数式编程的特点.html" class="sidebar-link">函数式编程的特点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/函数式编程的特点.html#函数式编程的特点" class="sidebar-link">函数式编程的特点</a></li></ul></li><li><a href="/memo/comprehensive/响应式页面设计的原理.html" class="sidebar-link">解释响应式页面设计的原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/响应式页面设计的原理.html#解释响应式页面设计的原理" class="sidebar-link">解释响应式页面设计的原理</a></li></ul></li><li><a href="/memo/comprehensive/常用的异步处理方法.html" class="sidebar-link">常用的异步处理方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/常用的异步处理方法.html#常用的异步处理方法" class="sidebar-link">常用的异步处理方法</a></li></ul></li><li><a href="/memo/comprehensive/常见的前端优化技巧.html" class="sidebar-link">常见的前端优化技巧</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/常见的前端优化技巧.html#常见的前端优化技巧" class="sidebar-link">常见的前端优化技巧</a></li></ul></li><li><a href="/memo/comprehensive/移动端click事件延时.html" class="sidebar-link">移动端click事件延时</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/移动端click事件延时.html#移动端click事件延时" class="sidebar-link">移动端click事件延时</a></li></ul></li><li><a href="/memo/comprehensive/移动端常见问题.html" class="sidebar-link">移动端常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/移动端常见问题.html#移动端常见问题" class="sidebar-link">移动端常见问题</a></li></ul></li><li><a href="/memo/comprehensive/页面加载.html" class="active sidebar-link">页面加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/页面加载.html#页面加载" class="sidebar-link">页面加载</a></li></ul></li><li><a href="/memo/comprehensive/高频率触发的事件的性能优化.html" class="sidebar-link">高频率触发的事件的性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/memo/comprehensive/高频率触发的事件的性能优化.html#高频率触发的事件的性能优化" class="sidebar-link">高频率触发的事件的性能优化</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DOM操作</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ES语法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网站</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软技能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>源码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>样式</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="https://github.com/formulahendry/955.WLB" target="_blank" rel="noopener noreferrer" class="sidebar-link">955工作生活平衡名单<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="页面加载"><a href="#页面加载" class="header-anchor">#</a> 页面加载</h2> <h3 id="从输入url到整个页面显示在用户面前发生了什么"><a href="#从输入url到整个页面显示在用户面前发生了什么" class="header-anchor">#</a> 从输入URL到整个页面显示在用户面前发生了什么</h3> <h4 id="_1-浏览器查找域名对应的ip地址"><a href="#_1-浏览器查找域名对应的ip地址" class="header-anchor">#</a> 1. 浏览器查找域名对应的IP地址</h4> <p><strong>IP地址</strong>：IP协议为互联网上的每一个网络和每一台主机都分配的一个逻辑地址。通过IP地址才能确定一台主机（服务器）的位置。</p> <p><strong>域名（DN，Domain Name）</strong>：IP地址不便于用户记忆和使用，故用域名来代替纯数字的IP地址。</p> <p><strong>DNS（Domain Name System）</strong>：每个域名都对应<strong>一个或多个</strong>提供相同服务的服务器的IP地址，只有知道服务器IP地址才能建立连接，所以需要通过DNS把域名解析成一个IP地址。</p> <p>说明：</p> <ul><li>域名和IP不是一一对应的关系，可以把多个提供相同服务的服务器IP设置为同一个域名，但在同一时刻一个域名只能解析出一个IP地址；同时，一个IP地址可以绑定多个域名，数量不限；</li> <li>这里的知识点，对前端而言只要知道使用CDN存放静态资源这种优化策略的原理是DNS负载均衡：如果一个大型网站的所有请求都由同一个服务器进行处理，是不现实的；并且对用户而言，用户并不关注具体是哪台机器处理了他的请求。因此，DNS可以根据多个服务器中每个服务器的负载量、该机器离用户的地理位置的距离等信息返回其中某个适合的主机的IP地址，这个过程就是<strong>DNS负载均衡，又叫做DNS重定向</strong>。<strong>CDN（Content Delivery Network）就是利用DNS的重定向技术</strong>，DNS服务器会返回一个跟用户最接近的点的IP地址。</li></ul> <h4 id="_2-浏览器根据ip地址与服务器建立socket连接"><a href="#_2-浏览器根据ip地址与服务器建立socket连接" class="header-anchor">#</a> 2. 浏览器根据IP地址与服务器建立socket连接</h4> <p><strong>建立连接——三次握手</strong>：知道了服务器的IP地址，便可开始与服务器建立连接了，通信连接的建立需要经历以下三个过程：</p> <ul><li>主机向服务器发送一个建立连接的请求（您好，我想认识你）；</li> <li>服务器接到请求后发送统一连接的信号（好的，很高兴认识你）；</li> <li>主机接到同意连接的信号后，再次向服务器发送了确认信号（我也很高兴认识你），至此，主机便于服务器建立了连接。</li></ul> <p>说明：</p> <ul><li>TCP协议：三次握手的过程采用TCP协议，其可以保证信息传输的可靠性，三次握手过程中，若一方收不到确认信息，协议会要求重新发送信号。</li></ul> <h4 id="_3-浏览器与服务器通信-浏览器发出请求、服务器处理请求"><a href="#_3-浏览器与服务器通信-浏览器发出请求、服务器处理请求" class="header-anchor">#</a> 3. 浏览器与服务器通信：浏览器发出请求、服务器处理请求</h4> <p>当服务器与主机建立了连接之后，主机便开始与服务器进行通信。网页请求是一个主机向服务器请求数据==&gt;服务器返回相应数据的<strong>单向</strong>的请求过程。</p> <ul><li>浏览器根据URL生成HTTP请求，请求中包含请求文件的位置、请求文件的方式等信息；</li> <li>服务器接到请求后，会根据HTTP请求中的信息来决定如何获取相应的HTML文件；</li> <li>服务器将得到的HTML文件发送给浏览器；</li> <li><strong>在浏览器还没有完全接受完HTML文件时便开始渲染、显示页面</strong>；</li> <li>在执行HTML中代码时，根据需要，浏览器会继续请求图片、CSS、Javascript、视频、音频等文件，过程类似。</li></ul> <p>针对浏览器渲染、显示页面的过程，说明如下：</p> <ul><li>浏览器端是一个边解析边渲染的过程。</li> <li>HTML Parser将HTML内容解析为DOM Tree，CSS Parser将CSS内容解析为样式规则（Style Rules）；</li> <li>根据样式规则和DOM Tree来渲染树(Render Tree),在这个渲染树的过程中会发生回流（layout/reflow/relayout），回流就是浏览器计算各个盒模型的位置、大小等属性的过程；</li> <li>等浏览器确定了盒模型的位置、尺寸等数据后开始绘制页面，这个过程称为重绘（Painting/repaint）。</li></ul> <h4 id="_4-浏览器与服务器断开连接"><a href="#_4-浏览器与服务器断开连接" class="header-anchor">#</a> 4. 浏览器与服务器断开连接</h4> <p><strong>断开连接——四次挥手</strong>：</p> <ul><li>主机向服务器发送一个断开连接的请求（不早了，我该走了）；</li> <li>服务器接到请求后发送确认收到请求的信号（知道了）；</li> <li>服务器向主机发送断开通知（我也该走了）；</li> <li>主机接到断开通知后断开连接并反馈一个确认信号（嗯，好的），服务器收到确认信号后断开连接。</li></ul> <p>说明：</p> <ul><li>为什么服务器在接到断开请求时不立即同意断开：当服务器收到断开连接的请求时，可能仍然有数据未发送完毕，所以服务器先发送确认信号，等所有数据发送完毕后再同意断开；</li> <li>第四次挥手后，主机发送确认信号后并没有立即断开连接，而是等待了2个报文传送周期，原因是：如果第四次挥手的确认信息丢失，服务器将会重新发送第三次挥手的断开连接的信号，而服务器发觉丢包与重新发送断开连接到达主机的时间正好为2个报文传输周期。</li></ul> <h3 id="优化相关的讨论"><a href="#优化相关的讨论" class="header-anchor">#</a> 优化相关的讨论</h3> <p>使用CDN。</p> <p>对图片、css、js等静态资源进行压缩。</p> <p>合并图片（css sprite）。</p> <p>要权衡的是在全不合并（全不按需加载，最节约流量，但交互过程中的加载可能体验并不好）和全部合并（全不按需加载，最节约流量，但交互过程最流畅）之间找一个平衡点。不同类型系统的这个点肯定是不一样的，需要先确定好优化的目标才好有针对性地去解决。</p> <p>通常的项目JS代码量达不到需要特别关照的程度，一般uglify就足够了。</p> <p><strong>模块化开发是趋势</strong>：分而治之是不变的道理。无论是传统网页还是SPA应用，都需要借力模块化来保持代码的鲁棒性（Robust的音译，即健壮性）。解耦、独立，不会互相影响。</p> <p><strong>异步加载/按需加载</strong>本身有些跑偏了：从LAB.js开始，各种各样的加载器都在追求加载性能，异步加载，希望可以加快页面的加载速度。分模块加载，异步加载的好处其实并没有那么明显，模块太多，或者异步加载太多，整体的加载实现反而延长。</p> <p><strong>合理分组，同步加载，用好浏览器缓存和CDN应该可以解决大部分问题</strong>：区分开发运行时和线上运行时。开发时使用模块化、异步加载器大幅提升开发体验。线上按照<strong>代码更新频率</strong>和作用合理分组，合并压缩代码，同步加载3~5个文件。配置好静态服务器，使用CDN，充分利用浏览器缓存和CDN，静态资源就不会是性能瓶颈了。</p> <p>注意，浏览器通常会对同域下的静态资源有并行下载最大数的限制。</p> <p>最后，任何不以场景为前提的设计都是耍流氓，任何太不切实际的理想终将幻灭，任何想永存的技术都是临时方案。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">5/31/2021, 9:54:28 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/memo/comprehensive/移动端常见问题.html" class="prev">
        移动端常见问题
      </a></span> <span class="next"><a href="/memo/comprehensive/高频率触发的事件的性能优化.html">
        高频率触发的事件的性能优化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/memo/assets/js/app.475facf6.js" defer></script><script src="/memo/assets/js/2.ee3c45b5.js" defer></script><script src="/memo/assets/js/23.e85ea71f.js" defer></script>
  </body>
</html>
